<!doctype html>
<html lang="tr"> 
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>oyunkcan â€” Mini Oyun PortalÄ±</title>
  <style>
    :root{--bg:#0b1020;--card:#0f1724;--accent:#3b82f6;--danger:#ef4444;--muted:#9ca3af;color-scheme:dark}
    *{box-sizing:border-box;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    body{margin:0;background:linear-gradient(180deg,#020617 0%,#071029 100%);color:#e6eef8;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px}
    .wrap{width:100%;max-width:980px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:12px;padding:18px;border:1px solid rgba(255,255,255,0.04)}
    header{display:flex;align-items:center;gap:12px}
    h1{margin:0;font-size:20px}
    .meta{color:var(--muted);font-size:13px}
    .menu{display:flex;gap:8px;margin-top:14px;flex-wrap:wrap}
    button, .btn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:inherit;padding:8px 12px;border-radius:8px;cursor:pointer}
    button.active{background:var(--accent);color:#041024;border-color:transparent}
    .content{display:flex;gap:16px;margin-top:18px}
    .left{width:420px}
    canvas{background:#000;border-radius:8px;display:block;width:100%;height:auto}
    .controls{display:flex;gap:8px;margin-top:8px;align-items:center}
    .score{margin-left:auto;color:var(--muted)}
    .mobile-controls{display:none;gap:8px;margin-top:10px}
    .tip{color:var(--muted);font-size:13px;margin-top:10px}
    .right{flex:1;min-width:240px}
    .section{background:rgba(255,255,255,0.02);padding:12px;border-radius:8px;margin-bottom:12px}
    .danger{color:var(--danger)}
    @media (max-width:900px){.content{flex-direction:column;align-items:center}.left{width:100%}.mobile-controls{display:flex}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>oyunkcan</h1>
        <div class="meta">Mini oyun portalÄ± â€” Aksiyon & Korku</div>
      </div>
    </header>

    <div class="menu">
      <button id="btn-action" class="active">Aksiyon</button>
      <button id="btn-horror">Korku</button>
      <button id="btn-reset">Yeniden BaÅŸlat</button>
      <div class="score">Skor: <span id="score">0</span></div>
    </div>

    <div class="content">
      <div class="left">
        <canvas id="gameCanvas" width="400" height="400"></canvas>
        <div class="mobile-controls">
          <button id="leftBtn">â—€</button>
          <button id="rightBtn">â–¶</button>
          <button id="tapBtn">TÄ±kla</button>
        </div>
        <div class="tip">Ä°pucu: Klavyede â† ve â†’ ile oynayabilirsiniz. Mobilde alt tuÅŸlarÄ± kullanÄ±n.</div>
      </div>

      <div class="right">
        <div class="section">
          <strong>NasÄ±l oynanÄ±r â€” Aksiyon</strong>
          <p class="tip">Oyuncu (yeÅŸil kare) ile sola-saÄŸa hareket edip dÃ¼ÅŸen kÄ±rmÄ±zÄ± bloklardan kaÃ§. Ã‡arpÄ±nca oyun biter.</p>
        </div>
        <div class="section">
          <strong>NasÄ±l oynanÄ±r â€” Korku</strong>
          <p class="tip">Ekrarda karanlÄ±k ve sadece fare etrafÄ±nda Ä±ÅŸÄ±k vardÄ±r. Gizli "korkunÃ§" nokta fareyle Ã§akÄ±ÅŸÄ±rsa jumpscare (alert) olur.</p>
        </div>
        <div class="section">
          <strong>YayÄ±n</strong>
          <p class="tip">Bu dosyayÄ± <code>index.html</code> olarak kaydet. GitHub Pages ile Ã¼cretsiz yayÄ±nlayabilirsin (repo adÄ±: <code>oyunkcan</code> Ã¶nerilir).</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Basic game framework supporting two modes: action & horror
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const btnAction = document.getElementById('btn-action');
    const btnHorror = document.getElementById('btn-horror');
    const btnReset = document.getElementById('btn-reset');

    const leftBtn = document.getElementById('leftBtn');
    const rightBtn = document.getElementById('rightBtn');
    const tapBtn = document.getElementById('tapBtn');

    let mode = 'action';
    let raf = null;
    let interval = null;

    // Shared state
    let score = 0;

    // Action game state
    const player = { x: 180, y: 360, size: 40, speed: 20 };
    let enemies = [];

    // Horror game state
    let fearX = 200, fearY = 200;
    let lightRadius = 70;

    function setMode(m){
      mode = m;
      btnAction.classList.toggle('active', mode==='action');
      btnHorror.classList.toggle('active', mode==='horror');
      reset();
      if(mode==='action') startAction(); else startHorror();
    }

    function reset(){
      cancelAnimationFrame(raf);
      clearInterval(interval);
      enemies = [];
      score = 0; scoreEl.textContent = score;
      ctx.clearRect(0,0,canvas.width,canvas.height);
      canvas.onmousemove = null;
    }

    // ACTION GAME
    function startAction(){
      player.x = 180; player.y = 360; enemies = []; score = 0; scoreEl.textContent = score;
      // spawn enemies periodically
      interval = setInterval(()=>{
        if(Math.random() < 0.45){
          enemies.push({ x: Math.random()*(canvas.width-20), y: -20, size: 20, speed: 2 + Math.random()*3 });
        }
      }, 650);
      loopAction();
    }

    function loopAction(){
      raf = requestAnimationFrame(loopAction);
      ctx.clearRect(0,0,canvas.width,canvas.height);
      // draw player
      ctx.fillStyle = '#16a34a';
      ctx.fillRect(player.x, player.y, player.size, player.size);
      // enemies
      ctx.fillStyle = '#ef4444';
      for(let i = enemies.length-1; i>=0; i--){
        const e = enemies[i];
        e.y += e.speed;
        ctx.fillRect(e.x, e.y, e.size, e.size);
        // remove if off screen
        if(e.y > canvas.height) enemies.splice(i,1);
        // collision
        if(collideRect(e.x,e.y,e.size,e.size, player.x,player.y,player.size,player.size)){
          gameOver('Aksiyon oyununda kaybettin! Skor: ' + score);
          return;
        }
      }
      score += 1;
      scoreEl.textContent = score;
    }

    // HORROR GAME
    function startHorror(){
      // dark overlay with small light around cursor
      score = 0; scoreEl.textContent = '-';
      fearX = Math.random()*canvas.width; fearY = Math.random()*canvas.height;
      // move fear around every second
      interval = setInterval(()=>{
        fearX = Math.random()*canvas.width; fearY = Math.random()*canvas.height;
      }, 1100);

      canvas.onmousemove = (e) => {
        const rect = canvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        // paint a dim background
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = 'rgba(0,0,0,0.92)';
        ctx.fillRect(0,0,canvas.width,canvas.height);
        // light circle
        const gradient = ctx.createRadialGradient(x,y,10,x,y,lightRadius);
        gradient.addColorStop(0, 'rgba(255,255,255,0.95)');
        gradient.addColorStop(0.6, 'rgba(255,255,255,0.06)');
        gradient.addColorStop(1, 'rgba(0,0,0,0)');
        ctx.globalCompositeOperation = 'destination-out';
        ctx.fillStyle = gradient;
        ctx.beginPath(); ctx.arc(x,y, lightRadius, 0, Math.PI*2); ctx.fill();
        ctx.globalCompositeOperation = 'source-over';

        // small indicator for fear (not visible normally)
        // If user is very close to fear point -> trigger
        const dx = x - fearX; const dy = y - fearY;
        if(Math.abs(dx) < 12 && Math.abs(dy) < 12){
          // jumpscare
          clearInterval(interval);
          canvas.onmousemove = null;
          alert('ğŸ‘» Bir ÅŸey sana dokundu!');
          setMode('action');
        }
      };
      // initial dark canvas
      ctx.fillStyle='rgba(0,0,0,0.96)'; ctx.fillRect(0,0,canvas.width,canvas.height);
    }

    function collideRect(x1,y1,w1,h1,x2,y2,w2,h2){
      return !(x1+w1 < x2 || x1 > x2+w2 || y1+h1 < y2 || y1 > y2+h2);
    }

    function gameOver(msg){
      cancelAnimationFrame(raf);
      clearInterval(interval);
      canvas.onmousemove = null;
      setTimeout(()=>{alert(msg);},10);
      setMode('action');
    }

    // Input
    document.addEventListener('keydown',(e)=>{
      if(mode!=='action') return;
      if(e.key === 'ArrowLeft') player.x = Math.max(0, player.x - player.speed);
      if(e.key === 'ArrowRight') player.x = Math.min(canvas.width - player.size, player.x + player.speed);
    });

    leftBtn?.addEventListener('touchstart',()=>{ if(mode==='action') player.x = Math.max(0, player.x - player.speed); });
    rightBtn?.addEventListener('touchstart',()=>{ if(mode==='action') player.x = Math.min(canvas.width - player.size, player.x + player.speed); });
    leftBtn?.addEventListener('click',()=>{ if(mode==='action') player.x = Math.max(0, player.x - player.speed); });
    rightBtn?.addEventListener('click',()=>{ if(mode==='action') player.x = Math.min(canvas.width - player.size, player.x + player.speed); });

    tapBtn?.addEventListener('click',()=>{ if(mode==='action'){
      // give a small dash
      player.x = Math.min(canvas.width-player.size, player.x + 30);
    } else if(mode==='horror'){
      // in horror mode, simulate mouse move to center
      const evt = new MouseEvent('mousemove',{clientX: canvas.getBoundingClientRect().left + canvas.width/2, clientY: canvas.getBoundingClientRect().top + canvas.height/2});
      canvas.dispatchEvent(evt);
    }});

    // Buttons
    btnAction.addEventListener('click',()=>setMode('action'));
    btnHorror.addEventListener('click',()=>setMode('horror'));
    btnReset.addEventListener('click',()=>{ reset(); setMode('action'); });

    // simple touch drag for horror light on mobile
    canvas.addEventListener('touchmove', (ev)=>{
      if(mode!=='horror') return;
      const t = ev.touches[0];
      const rect = canvas.getBoundingClientRect();
      const x = t.clientX - rect.left; const y = t.clientY - rect.top;
      // dispatch a synthetic mousemove
      const m = new MouseEvent('mousemove', {clientX: t.clientX, clientY: t.clientY});
      canvas.dispatchEvent(m);
      ev.preventDefault();
    }, {passive:false});

    // init
    setMode('action');

    // Auto save name (display) â€” site name is oyunkcan
    console.log('Site: oyunkcan');
  </script>
</body>
</html>